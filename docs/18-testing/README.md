# –†–æ–∑–¥—ñ–ª 18: –°—Ç—Ä–∞—Ç–µ–≥—ñ—è —Ç–∞ –ü—Ä–æ—Ü–µ—Å–∏ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç —î –≤–∏—á–µ—Ä–ø–Ω–∏–º –ø–æ—Å—ñ–±–Ω–∏–∫–æ–º –∑ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤ –ø—Ä–æ–µ–∫—Ç—ñ. –í—ñ–Ω –æ–ø–∏—Å—É—î —Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—é, —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —Ç–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏, —è–∫–∏—Ö –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—è –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –≤–∏—Å–æ–∫–æ—ó —è–∫–æ—Å—Ç—ñ –ø—Ä–æ–¥—É–∫—Ç—É.

## 1. –§—ñ–ª–æ—Å–æ—Ñ—ñ—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ú–∏ –¥–æ—Ç—Ä–∏–º—É—î–º–æ—Å—è –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–æ—ó —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, —â–æ–± –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å –Ω–∞ –∫–æ–∂–Ω–æ–º—É –µ—Ç–∞–ø—ñ —Ä–æ–∑—Ä–æ–±–∫–∏.

-   **Unit-—Ç–µ—Å—Ç–∏ (–Æ–Ω—ñ—Ç-—Ç–µ—Å—Ç–∏)**: –°–ø—Ä—è–º–æ–≤–∞–Ω—ñ –Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞–π–º–µ–Ω—à–∏—Ö, —ñ–∑–æ–ª—å–æ–≤–∞–Ω–∏—Ö —á–∞—Å—Ç–∏–Ω –∫–æ–¥—É (–æ–∫—Ä–µ–º–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π, –º–µ—Ç–æ–¥—ñ–≤, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤). –í–æ–Ω–∏ –Ω–µ –≤–∑–∞—î–º–æ–¥—ñ—é—Ç—å —ñ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (–±–∞–∑–æ—é –¥–∞–Ω–∏—Ö, API) —ñ —î –æ—Å–Ω–æ–≤–æ—é –ø—ñ—Ä–∞–º—ñ–¥–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è. –á—Ö–Ω—è –≥–æ–ª–æ–≤–Ω–∞ –ø–µ—Ä–µ–≤–∞–≥–∞ ‚Äî –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

-   **Integration-—Ç–µ—Å—Ç–∏ (–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏)**: –ü–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å –≤–∑–∞—î–º–æ–¥—ñ—ó –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ –º–æ–¥—É–ª—è–º–∏ —Å–∏—Å—Ç–µ–º–∏. –£ –Ω–∞—à–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ —Ü–µ –Ω–∞—Å–∞–º–ø–µ—Ä–µ–¥ —Å—Ç–æ—Å—É—î—Ç—å—Å—è –≤–∑–∞—î–º–æ–¥—ñ—ó —Å–µ—Ä–≤—ñ—Å–Ω–æ–≥–æ —à–∞—Ä—É —Ç–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –∑ —Ä–µ–∞–ª—å–Ω–æ—é, –∞–ª–µ —ñ–∑–æ–ª—å–æ–≤–∞–Ω–æ—é, —Ç–µ—Å—Ç–æ–≤–æ—é –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.

## 2. –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä—ñ–π (Toolchain)

-   **–¢–µ—Å—Ç–æ–≤–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫**: [Vitest](https://vitest.dev/) ‚Äî —Å—É—á–∞—Å–Ω–∏–π —Ç–∞ —à–≤–∏–¥–∫–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, —Å—É–º—ñ—Å–Ω–∏–π –∑ Vite, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤—Å—ñ—Ö –≤–∏–¥—ñ–≤ —Ç–µ—Å—Ç—ñ–≤.
-   **–°–µ—Ä–µ–¥–æ–≤–∏—â–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**: `node` –¥–ª—è –±–µ–∫–µ–Ω–¥-–ª–æ–≥—ñ–∫–∏.
-   **–¢–µ—Å—Ç–æ–≤–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö**: –Ü–∑–æ–ª—å–æ–≤–∞–Ω–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑–∏ –¥–∞–Ω–∏—Ö Supabase (PostgreSQL), –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –≤–∏–∫–ª—é—á–Ω–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤.
-   **–ó–≤—ñ—Ç–∏ –ø—Ä–æ –ø–æ–∫—Ä–∏—Ç—Ç—è**: `v8` (—ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ —É Vitest) –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –ø–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É —Ç–µ—Å—Ç–∞–º–∏.

## 3. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –¢–µ—Å—Ç—ñ–≤

–í—Å—ñ —Ç–µ—Å—Ç–∏ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `/tests`, —è–∫–∞ –º–∞—î –Ω–∞—Å—Ç—É–ø–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```
tests/
‚îú‚îÄ‚îÄ unit/                          # ‚úÖ Unit-—Ç–µ—Å—Ç–∏ –¥–ª—è —ñ–∑–æ–ª—å–æ–≤–∞–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏.
‚îÇ   ‚îú‚îÄ‚îÄ services/                  # –¢–µ—Å—Ç–∏ –¥–ª—è —Å–µ—Ä–≤—ñ—Å–Ω–æ–≥–æ —à–∞—Ä—É (–Ω–∞–ø—Ä., billing.service.ts).
‚îÇ   ‚îî‚îÄ‚îÄ utils/                     # –¢–µ—Å—Ç–∏ –¥–ª—è –¥–æ–ø–æ–º—ñ–∂–Ω–∏—Ö —É—Ç–∏–ª—ñ—Ç.
‚îÇ
‚îú‚îÄ‚îÄ integration/                   # üöÄ Integration-—Ç–µ—Å—Ç–∏, —â–æ –≤–∑–∞—î–º–æ–¥—ñ—é—Ç—å –∑ —Ä–µ–∞–ª—å–Ω–æ—é —Ç–µ—Å—Ç–æ–≤–æ—é –ë–î.
‚îÇ   ‚îú‚îÄ‚îÄ repositories/              # –¢–µ—Å—Ç–∏ –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤, —â–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å SQL-–∑–∞–ø–∏—Ç–∏.
‚îÇ   ‚îî‚îÄ‚îÄ services/                  # –¢–µ—Å—Ç–∏ –¥–ª—è —Å–µ—Ä–≤—ñ—Å—ñ–≤, —â–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª –ª–æ–≥—ñ–∫–∏.
‚îÇ
‚îî‚îÄ‚îÄ lib/                           # ‚öôÔ∏è –î–æ–ø–æ–º—ñ–∂–Ω–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è —Ç–µ—Å—Ç—ñ–≤.
    ‚îú‚îÄ‚îÄ config/                    # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó Vitest –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ —Ç–µ—Å—Ç—ñ–≤.
    ‚îú‚îÄ‚îÄ fixtures/                  # –ù–∞–±–æ—Ä–∏ —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö (–º–æ–∫–∏) –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ —Ç–µ—Å—Ç—ñ–≤.
    ‚îú‚îÄ‚îÄ helpers/                   # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó (–Ω–∞–ø—Ä., –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ë–î).
    ‚îî‚îÄ‚îÄ setup/                     # –§–∞–π–ª–∏ –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞.
```

## 4. –†–æ–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞

### 4.1. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

–î–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —Ç–µ—Å—Ç–∞–º–∏ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–æ –Ω–∞–±—ñ—Ä NPM-—Å–∫—Ä–∏–ø—Ç—ñ–≤:

-   **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Ç–µ—Å—Ç–∏ (—à–≤–∏–¥–∫—ñ unit + –ø–æ–≤—ñ–ª—å–Ω—ñ integration):**
    ```bash
    npm test
    ```
-   **–¢—ñ–ª—å–∫–∏ Unit-—Ç–µ—Å—Ç–∏ (—à–≤–∏–¥–∫–æ, –±–µ–∑ –ë–î):**
    ```bash
    npm run test:unit
    ```
-   **–¢—ñ–ª—å–∫–∏ Integration-—Ç–µ—Å—Ç–∏ (–∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º –¥–æ —Ç–µ—Å—Ç–æ–≤–æ—ó –ë–î):**
    ```bash
    npm run test:integration
    ```
-   **–†–µ–∂–∏–º —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–º—ñ–Ω–∞—Ö –∫–æ–¥—É):**
    ```bash
    npm run test:watch
    ```
-   **–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∑–≤—ñ—Ç –ø—Ä–æ –ø–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É (—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤ `/coverage`):**
    ```bash
    npm run test:coverage
    ```
-   **–ó–∞–ø—É—Å–∫ —É –≤—ñ–∑—É–∞–ª—å–Ω–æ–º—É UI —Ä–µ–∂–∏–º—ñ (–¥–ª—è –∑—Ä—É—á–Ω–æ–≥–æ –¥–µ–±–∞–≥—ñ–Ω–≥—É):**
    ```bash
    npm run test:ui
    ```

### 4.2. –†–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö –≤ —Ç–µ—Å—Ç–∞—Ö

–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –≤–∏–º–∞–≥–∞—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.

1.  **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è**: –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—à–æ–º—É `.env` —Ñ–∞–π–ª—ñ –ø—Ä–∏—Å—É—Ç–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ **—Ç–µ—Å—Ç–æ–≤–æ—ó** –ë–î: `NEXT_PUBLIC_SUPABASE_TEST_URL` —Ç–∞ `SUPABASE_TEST_SERVICE_KEY`.
2.  **–Ü–∑–æ–ª—è—Ü—ñ—è**: –ö–æ–∂–µ–Ω —Ç–µ—Å—Ç –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤ –∞–±—Å–æ–ª—é—Ç–Ω–æ —á–∏—Å—Ç–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ. –ì–ª–æ–±–∞–ª—å–Ω–∏–π —Ö—É–∫ `afterEach` (`tests/lib/setup/integration-setup.ts`) –≥–∞—Ä–∞–Ω—Ç—É—î –≤–∏–¥–∞–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –¥–∞–Ω–∏—Ö, —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –ø—ñ–¥ —á–∞—Å —Ç–µ—Å—Ç—É.
3.  **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö**: –î–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö —Å—É—Ç–Ω–æ—Å—Ç–µ–π (–≤–æ—Ä–∫—Å–ø–µ–π—Å—ñ–≤, –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ —Ç–æ—â–æ) **–∑–∞–≤–∂–¥–∏** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ö–µ–ª–ø–µ—Ä–∏ –∑ `tests/lib/helpers/db-setup.ts`. –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å —Ç–∞ –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö.

## 5. –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏ –ù–∞–ø–∏—Å–∞–Ω–Ω—è –¢–µ—Å—Ç—ñ–≤

–î–æ—Ç—Ä–∏–º–∞–Ω–Ω—è —î–¥–∏–Ω–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ñ–≤ —î –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–∏–º –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ —Ç–∞ –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–æ—Å—Ç—ñ —Ç–µ—Å—Ç—ñ–≤.

### 5.1. –ü–∞—Ç–µ—Ä–Ω AAA (Arrange, Act, Assert)

–ö–æ–∂–µ–Ω —Ç–µ—Å—Ç –ø–æ–≤–∏–Ω–µ–Ω —á—ñ—Ç–∫–æ —Å–ª—ñ–¥—É–≤–∞—Ç–∏ —Ü—ñ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ:

```typescript
it("–º–∞—î –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥—ñ—é X –∑–∞ —É–º–æ–≤–æ—é Y", async () => {
  // Arrange - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—Å—ñ—Ö –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö —É–º–æ–≤, –¥–∞–Ω–∏—Ö —Ç–∞ –º–æ–∫—ñ–≤.
  const workspace = await createTestWorkspace({ name: "Initial Workspace" });
  const updates = { tier: "pro" };

  // Act - –î—ñ—è. –í–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó –∞–±–æ –º–µ—Ç–æ–¥—É, —è–∫–∏–π —Ç–µ—Å—Ç—É—î—Ç—å—Å—è.
  const result = await subscriptionRepository.update(workspace.id, updates);

  // Assert - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞. –ó–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∑ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è–º–∏.
  expect(result.tier).toBe("pro");
});
```

### 5.2. –Ü–∑–æ–ª—è—Ü—ñ—è —Ç–∞ –ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å

-   –ö–æ–∂–µ–Ω —Ç–µ—Å—Ç (`it` –±–ª–æ–∫) –º–∞—î –±—É—Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–º –≤—ñ–¥ —ñ–Ω—à–∏—Ö.
-   –ó–∞–±–æ—Ä–æ–Ω—è—î—Ç—å—Å—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ –ø–æ—Ä—è–¥–∫—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤.
-   –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `beforeEach` –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–µ—Å—Ç—É.

### 5.3. –û–ø–∏—Å–æ–≤—ñ –ù–∞–∑–≤–∏

–ù–∞–∑–≤–∞ —Ç–µ—Å—Ç—É –ø–æ–≤–∏–Ω–Ω–∞ —á—ñ—Ç–∫–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è "–©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è?".

-   ‚ùå **–ü–æ–≥–∞–Ω–æ**: `it("—Ç–µ—Å—Ç –æ–Ω–æ–≤–ª–µ–Ω–Ω—è")`
-   ‚úÖ **–î–æ–±—Ä–µ**: `it("–ø–æ–≤–∏–Ω–µ–Ω –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ `updated_at` –Ω–∞–≤—ñ—Ç—å –ø—Ä–∏ –ø–æ—Ä–æ–∂–Ω—å–æ–º—É –æ–±'—î–∫—Ç—ñ –æ–Ω–æ–≤–ª–µ–Ω—å")`

### 5.4. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫—Ä–∞–π–Ω—ñ—Ö –≤–∏–ø–∞–¥–∫—ñ–≤ (Edge Cases)

–•–æ—Ä–æ—à–∏–π —Ç–µ—Å—Ç –ø–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–µ —Ç—ñ–ª—å–∫–∏ "—â–∞—Å–ª–∏–≤–∏–π —à–ª—è—Ö", –∞–ª–µ –π –ø–æ–≤–µ–¥—ñ–Ω–∫—É —Å–∏—Å—Ç–µ–º–∏ –≤ –≥—Ä–∞–Ω–∏—á–Ω–∏—Ö —É–º–æ–≤–∞—Ö. –ó–∞–≤–∂–¥–∏ —Ä–æ–∑–≥–ª—è–¥–∞–π—Ç–µ —Ç–∞–∫—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:
-   –ü–µ—Ä–µ–¥–∞—á–∞ `null`, `undefined` –∞–±–æ –ø–æ—Ä–æ–∂–Ω—ñ—Ö —Ä—è–¥–∫—ñ–≤.
-   –†–æ–±–æ—Ç–∞ –∑ –ø–æ—Ä–æ–∂–Ω—ñ–º–∏ –º–∞—Å–∏–≤–∞–º–∏ –∞–±–æ –æ–±'—î–∫—Ç–∞–º–∏.
-   –û–±—Ä–æ–±–∫–∞ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏—Ö ID –∞–±–æ —ñ–Ω—à–∏—Ö –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤ –¥–∞–Ω–∏—Ö.
-   –†–µ–∞–∫—Ü—ñ—è –Ω–∞ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∑–∞–ø–∏—Å—É –≤ –ë–î.

### 5.5. –°—Ç–∞–Ω–¥–∞—Ä—Ç –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó (JSDoc)

–•–æ—á–∞ –º–∏ –Ω–µ –º–æ–¥–∏—Ñ—ñ–∫—É—î–º–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –≤ —Ä–∞–º–∫–∞—Ö —Ü—å–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è, **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –¥–ª—è –Ω–æ–≤–∏—Ö —Ç–µ—Å—Ç—ñ–≤** —î –ø–æ–≤–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é JSDoc.

**–ö–ª—é—á–æ–≤—ñ —Ç–µ–≥–∏:**
-   `@fileoverview`: –ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ–∞–π–ª—É.
-   `@description`: –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏–π –æ–ø–∏—Å.
-   `@see`: –ü—Ä—è–º–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ñ–∞–π–ª, —â–æ —Ç–µ—Å—Ç—É—î—Ç—å—Å—è (`{@link path/to/file}`).
-   `@group`: –¢–∏–ø —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ –≥—Ä—É–ø–∞ —Ç–µ—Å—Ç—É (–Ω–∞–ø—Ä., `Integration - Subscriptions`).
-   `@suite`: –û–ø–∏—Å `describe` –±–ª–æ–∫—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó.
-   `@hook`: –û–ø–∏—Å —Ö—É–∫—ñ–≤ (`beforeEach`, `afterAll`).
-   `@test`: –û–ø–∏—Å `it` –±–ª–æ–∫—É. **–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ** –¥–æ–¥–∞–≤–∞—Ç–∏ –æ–ø–∏—Å —É —Ñ–æ—Ä–º–∞—Ç—ñ **Given/When/Then**.

**–ü—Ä–∏–∫–ª–∞–¥:**
```typescript
/**
 * @test –ü–æ–≤–∏–Ω–µ–Ω –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ null –¥–ª—è –Ω–µ—ñ—Å–Ω—É—é—á–æ–≥–æ —Ä–æ–±–æ—á–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É.
 * @description
 *   Given: ID —Ä–æ–±–æ—á–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É, —è–∫–æ–≥–æ –Ω–µ —ñ—Å–Ω—É—î –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö.
 *   When: –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ—è `getByWorkspaceId`.
 *   Then: –§—É–Ω–∫—Ü—ñ—è –ø–æ–≤–∏–Ω–Ω–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ `null` –±–µ–∑ –ø–æ–º–∏–ª–æ–∫.
 */
it("–ø–æ–≤–µ—Ä—Ç–∞—î null –¥–ª—è –Ω–µ—ñ—Å–Ω—É—é—á–æ–≥–æ workspace", async () => { /* ... */ });
```

## 6. –ë–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–∞ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (CI/CD)

–¢–µ—Å—Ç–∏ —î –æ–±–æ–≤'—è–∑–∫–æ–≤–æ—é —á–∞—Å—Ç–∏–Ω–æ—é –Ω–∞—à–æ–≥–æ CI/CD –ø—Ä–æ—Ü–µ—Å—É —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –≤ **GitHub Actions** –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ/–æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ Pull Request —Ç–∞ –ø—Ä–∏ push –≤ –æ—Å–Ω–æ–≤–Ω—ñ –≥—ñ–ª–∫–∏ (`main`, `develop`). –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —É —Ñ–∞–π–ª—ñ `.github/workflows/test.yml`.

## 7. –£—Å—É–Ω–µ–Ω–Ω—è –ù–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

### "–ü–ª–∞–≤–∞—é—Ç—å" —Ç–µ—Å—Ç–∏ (Flaky Tests)

–Ø–∫—â–æ —Ç–µ—Å—Ç —ñ–Ω–æ–¥—ñ –ø–∞–¥–∞—î –±–µ–∑ –≤–∏–¥–∏–º–∏—Ö –ø—Ä–∏—á–∏–Ω, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ:
1.  **–Ü–∑–æ–ª—è—Ü—ñ—è**: –ß–∏ –Ω–µ –≤–ø–ª–∏–≤–∞—î –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Ç–µ—Å—Ç –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π? –ú–æ–∂–ª–∏–≤–æ, –¥–∞–Ω—ñ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –ø–æ–∑–∞ `beforeEach`.
2.  **–û—á–∏—â–µ–Ω–Ω—è**: –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ö—É–∫ `afterEach` —É `integration-setup.ts` –∫–æ—Ä–µ–∫—Ç–Ω–æ –≤–∏–¥–∞–ª—è—î –≤—Å—ñ —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ, –æ—Å–æ–±–ª–∏–≤–æ –∑ —Ç–∞–±–ª–∏—Ü—å, —â–æ –º–∞—é—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ.
3.  **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å**: –ß–∏ –Ω–µ –∑–∞–±—É–ª–∏ –≤–∏ `await` —Ç–∞–º, –¥–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è?

## 8. –î–æ–¥–∞—Ç–∫–æ–≤—ñ –†–µ—Å—É—Ä—Å–∏

-   [–û—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Vitest](https://vitest.dev/)
-   [–ù–∞–π–∫—Ä–∞—â—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è JavaScript](https://testingjavascript.com/)
-   [–ì–∞–π–¥ –ø–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—é –∑ Supabase](https://supabase.com/docs/guides/testing)
