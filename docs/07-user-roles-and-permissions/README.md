# –†–æ–∑–¥—ñ–ª 7: –†–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É

## 7.1. –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è —Ç–∞ –Ü—î—Ä–∞—Ä—Ö—ñ—è –†–æ–ª–µ–π

–°–∏—Å—Ç–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–æ–¥–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–æ–ª–µ–π (Role-Based Access Control, RBAC), —â–æ–± —á—ñ—Ç–∫–æ —Ä–æ–∑–º–µ–∂–æ–≤—É–≤–∞—Ç–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Ä—ñ–∑–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤. –ö–æ–∂–µ–Ω –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–π –¥–æ **–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó (workspace)**, —â–æ –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–æ–≤–Ω—É —ñ–∑–æ–ª—è—Ü—ñ—é –¥–∞–Ω–∏—Ö –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ –∫–æ–º–ø–∞–Ω—ñ—è–º–∏-–∫–ª—ñ—î–Ω—Ç–∞–º–∏ (multi-tenancy).

### –Ü—î—Ä–∞—Ä—Ö—ñ—è —Ä–æ–ª–µ–π:
```
–í–ª–∞—Å–Ω–∏–∫ (Owner)
    ‚Üì
–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä (Admin)
    ‚Üì
–ú–µ–Ω–µ–¥–∂–µ—Ä (Manager)
    ‚Üì
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á (User)
    ‚Üì
–ì—ñ—Å—Ç—å (Guest) ‚Äî —Ä–æ–ª—å –∑ –¥–æ—Å—Ç—É–ø–æ–º –ª–∏—à–µ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è
```

### –û–ø–∏—Å –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ä–æ–ª–µ–π:

*   **–í–ª–∞—Å–Ω–∏–∫ / –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä (Owner/Admin):** –ó–∞–∑–≤–∏—á–∞–π –≤–ª–∞—Å–Ω–∏–∫ –±—ñ–∑–Ω–µ—Å—É –∞–±–æ –≥–æ–ª–æ–≤–Ω–∏–π –∫–µ—Ä—ñ–≤–Ω–∏–∫. –ú–∞—î –ø–æ–≤–Ω—ñ –ø—Ä–∞–≤–∞ –≤ –º–µ–∂–∞—Ö —Å–≤–æ—î—ó –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó. –ú–æ–∂–µ –∫–µ—Ä—É–≤–∞—Ç–∏ –≤—Å—ñ–º–∞ –¥–∞–Ω–∏–º–∏ (–∫–ª—ñ—î–Ω—Ç–∏, –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è), –∑–∞–ø—Ä–æ—à—É–≤–∞—Ç–∏ —Ç–∞ –≤–∏–¥–∞–ª—è—Ç–∏ —á–ª–µ–Ω—ñ–≤ –∫–æ–º–∞–Ω–¥–∏, –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó —Ç–∞ –∫–µ—Ä—É–≤–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–æ—é.

*   **–ú–µ–Ω–µ–¥–∂–µ—Ä / –°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫ (Manager/Staff User):** –†—è–¥–æ–≤–∏–π —á–ª–µ–Ω –∫–æ–º–∞–Ω–¥–∏. –ú–æ–∂–µ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Ç–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∫–ª—ñ—î–Ω—Ç—Å—å–∫—ñ –∑–∞–ø–∏—Å–∏ —Ç–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, –∞–ª–µ –∑ –ø–µ–≤–Ω–∏–º–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –Ω–µ –º–æ–∂–µ –≤–∏–¥–∞–ª—è—Ç–∏ –∫–ª—ñ—î–Ω—Ç—ñ–≤ –∞–±–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∫–ª—é—á–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è).

*   **–ì—ñ—Å—Ç—å / –õ–∏—à–µ —á–∏—Ç–∞–Ω–Ω—è (Guest/Read-Only):** –†–æ–ª—å –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫–∏–º –ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö –±–µ–∑ –ø—Ä–∞–≤–∞ –Ω–∞ —ó—Ö –∑–º—ñ–Ω—É. –ö–æ—Ä–∏—Å–Ω–æ –¥–ª—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä—ñ–≤, –∞—É–¥–∏—Ç–æ—Ä—ñ–≤ –∞–±–æ —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á—ñ–≤.

*   **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á-–ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ (Supplier User) (–º–∞–π–±—É—Ç–Ω—è —Ñ—É–Ω–∫—Ü—ñ—è):** –†–æ–ª—å –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–Ω–∏–∫—ñ–≤ –∫–æ–º–ø–∞–Ω—ñ–π-–ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤. –¢–∞–∫–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–º–æ–∂–µ –∫–µ—Ä—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–º –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä—ñ–≤ —Ç–∞ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, —Ä–æ–∑–º—ñ—â–µ–Ω—ñ –Ω–∞ –π–æ–≥–æ —Ç–æ–≤–∞—Ä–∏. –î–æ—Å—Ç—É–ø –±—É–¥–µ –æ–±–º–µ–∂–µ–Ω–æ –ø–æ—Ä—Ç–∞–ª–æ–º –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –±–µ–∑ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –±–∞—á–∏—Ç–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –¥–∞–Ω—ñ CRM –∫–ª—ñ—î–Ω—Ç–∞.

*   **–°–∏—Å—Ç–µ–º–Ω–∏–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä (–≤–Ω—É—Ç—Ä—ñ—à–Ω—è —Ä–æ–ª—å):** –°—É–ø–µ—Ä-–∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–∞—à–æ—ó SaaS-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∏, –Ω–µ–≤–∏–¥–∏–º–∏–π –¥–ª—è –∫—ñ–Ω—Ü–µ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤. –¶—è —Ä–æ–ª—å –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ç–µ—Ö–Ω—ñ—á–Ω–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏, –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ —Ç–∞ —É—Å—É–Ω–µ–Ω–Ω—è –Ω–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π. –î–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤ –±—É–¥–µ —Å—É–≤–æ—Ä–æ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π —Ç–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª—é—î—Ç—å—Å—è.

## 7.2. –î–µ—Ç–∞–ª—å–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É

| –§—É–Ω–∫—Ü—ñ—è | –í–ª–∞—Å–Ω–∏–∫ | –ê–¥–º—ñ–Ω | –ú–µ–Ω–µ–¥–∂–µ—Ä | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á | –ì—ñ—Å—Ç—å |
|---|---|---|---|---|---|
| **–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è** | | | | | |
| –°—Ç–≤–æ—Ä–∏—Ç–∏ workspace | ‚úÖ | ‚ùå | ‚ùå | ‚ùå | ‚ùå |
| –í–∏–¥–∞–ª–∏—Ç–∏ workspace | ‚úÖ | ‚ùå | ‚ùå | ‚ùå | ‚ùå |
| –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå | ‚ùå |
| –ö–µ—Ä—É–≤–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–æ—é | ‚úÖ | ‚ùå | ‚ùå | ‚ùå | ‚ùå |
| **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ** | | | | | |
| –ó–∞–ø—Ä–æ—Å–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå | ‚ùå |
| –ó–º—ñ–Ω–∏—Ç–∏ —Ä–æ–ª—å | ‚úÖ | ‚úÖ* | ‚ùå | ‚ùå | ‚ùå |
| –í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | ‚úÖ | ‚úÖ* | ‚ùå | ‚ùå | ‚ùå |
| **–ö–ª—ñ—î–Ω—Ç–∏** | | | | | |
| –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |
| –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞ | ‚úÖ | ‚úÖ | ‚úÖ | üî∂** | ‚ùå |
| –í–∏–¥–∞–ª–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –≤—Å—ñ—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤ | ‚úÖ | ‚úÖ | ‚úÖ | üî∂*** | üî∂*** |
| **–£–≥–æ–¥–∏** | | | | | |
| –°—Ç–≤–æ—Ä–∏—Ç–∏ —É–≥–æ–¥—É | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |
| –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —É–≥–æ–¥—É | ‚úÖ | ‚úÖ | ‚úÖ | üî∂** | ‚ùå |
| –í–∏–¥–∞–ª–∏—Ç–∏ —É–≥–æ–¥—É | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –≤—Å—ñ —É–≥–æ–¥–∏ | ‚úÖ | ‚úÖ | ‚úÖ | üî∂*** | üî∂*** |
| **–ó–∞–≤–¥–∞–Ω–Ω—è** | | | | | |
| –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |
| –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞ —ñ–Ω—à–æ–≥–æ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |
| –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è | ‚úÖ | ‚úÖ | ‚úÖ | üî∂¬π | ‚ùå |
| –í–∏–¥–∞–ª–∏—Ç–∏ (–º'—è–∫–æ) | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –í–∏–¥–∞–ª–∏—Ç–∏ (–∂–æ—Ä—Å—Ç–∫–æ) | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ (–ù–æ—Ç–∞—Ç–∫–∏/–õ–æ–≥–∏)** | | | | | |
| –°—Ç–≤–æ—Ä–∏—Ç–∏ –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |
| –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ | ‚úÖ | ‚úÖ | ‚úÖ | üî∂*** | üî∂*** |
| –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ `note` | ‚úÖ | ‚úÖ | ‚úÖ | üî∂** | ‚ùå |
| –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —ñ–Ω. –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå |
| –í–∏–¥–∞–ª—è—Ç–∏ `note` | ‚úÖ | ‚úÖ | ‚úÖ | üî∂** | ‚ùå |
| –í–∏–¥–∞–ª—è—Ç–∏ —ñ–Ω. –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå |
| **–ü—Ä–æ–¥—É–∫—Ç–∏/–ü–æ—Å–ª—É–≥–∏** | | | | | |
| –°—Ç–≤–æ—Ä–∏—Ç–∏ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –í–∏–¥–∞–ª–∏—Ç–∏ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå | ‚ùå |
| **–ó–≤—ñ—Ç–∏** | | | | | |
| –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |
| –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –≤—Å—ñ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ ¬´–ù–æ–≤–∞ –ü–æ—à—Ç–∞¬ª** | | | | | |
| –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API-–∫–ª—é—á–∞ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå | ‚ùå |
| –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¢–¢–ù | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |
| –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç—É—Å—ñ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| **–ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó (Email/SMS)** | | | | | |
| –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —à–ª—é–∑—ñ–≤ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå | ‚ùå |
| –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |
| –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è –º–∞—Å–æ–≤–∏—Ö —Ä–æ–∑—Å–∏–ª–æ–∫ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå | ‚ùå |

**–õ–µ–≥–µ–Ω–¥–∞:**
- ‚úÖ ‚Äî –ü–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ —Ñ—É–Ω–∫—Ü—ñ—ó.
- ‚ùå ‚Äî –ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ—É–Ω–∫—Ü—ñ—ó.
- üî∂* ‚Äî –ê–¥–º—ñ–Ω –Ω–µ –º–æ–∂–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏/–≤–∏–¥–∞–ª—è—Ç–∏ –í–ª–∞—Å–Ω–∏–∫–∞ –∞–±–æ —ñ–Ω—à–æ–≥–æ –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
- üî∂** ‚Äî –ú–∞—î –¥–æ—Å—Ç—É–ø –ª–∏—à–µ –¥–æ **–≤–ª–∞—Å–Ω–∏—Ö** –∑–∞–ø–∏—Å—ñ–≤ (–¥–µ —î –∞–≤—Ç–æ—Ä–æ–º).
- üî∂*** ‚Äî –î–æ—Å—Ç—É–ø –¥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –≤–∏–¥–∏–º–æ—Å—Ç—ñ –≤ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º ‚Äî –±–∞—á–∏—Ç—å –ª–∏—à–µ –≤–ª–∞—Å–Ω—ñ —Ç–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –π–æ–º—É –∑–∞–ø–∏—Å–∏).
- üî∂¬π ‚Äî –ú–æ–∂–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ **–ª–∏—à–µ —Ç—ñ –∑–∞–≤–¥–∞–Ω–Ω—è, —è–∫—ñ –Ω–∞ –Ω—å–æ–≥–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ** (–¥–µ —î –≤–∏–∫–æ–Ω–∞–≤—Ü–µ–º).

## 7.3. –í–∏–¥–∏–º—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∑–∞ –º–æ–¥–µ–ª–ª—é "–≤–∏–¥–∏–º—ñ—Å—Ç—å –ø–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ–º—É". –û–¥–Ω–∞–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ –∑–º—ñ–Ω–∏—Ç–∏ —Ü–µ–π —Ä–µ–∂–∏–º –Ω–∞ —Ä—ñ–≤–Ω—ñ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó.

| –†–æ–ª—å | –í–∏–¥–∏–º—ñ—Å—Ç—å –∫–ª—ñ—î–Ω—Ç—ñ–≤ | –í–∏–¥–∏–º—ñ—Å—Ç—å —É–≥–æ–¥ | –í–∏–¥–∏–º—ñ—Å—Ç—å –∑–∞–≤–¥–∞–Ω—å |
|---|---|---|---|
| Owner/Admin | –í—Å—ñ | –í—Å—ñ | –í—Å—ñ |
| Manager | –í—Å—ñ | –í—Å—ñ | –í—Å—ñ |
| User | –°–≤–æ—ó + –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ | –°–≤–æ—ó + –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ | –°–≤–æ—ó + –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ |
| Guest | –ó–∞ —Å–ø–∏—Å–∫–æ–º –¥–æ—Å—Ç—É–ø—É | –ó–∞ —Å–ø–∏—Å–∫–æ–º –¥–æ—Å—Ç—É–ø—É | –ù–µ–º–∞—î |

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–∏–¥–∏–º–æ—Å—Ç—ñ (–Ω–∞ —Ä—ñ–≤–Ω—ñ workspace):**
*   `visibility_mode`: `"all"` (–≤—Å—ñ –±–∞—á–∞—Ç—å –≤—Å–µ) | `"team"` (–≤ –º–µ–∂–∞—Ö –∫–æ–º–∞–Ω–¥–∏/–≤—ñ–¥–¥—ñ–ª—É) | `"own"` (—Ç—ñ–ª—å–∫–∏ –≤–ª–∞—Å–Ω—ñ –∑–∞–ø–∏—Å–∏).
*   `team_structure`: —ñ—î—Ä–∞—Ä—Ö—ñ—è –≤—ñ–¥–¥—ñ–ª—ñ–≤ –¥–ª—è —Ä–µ–∂–∏–º—É `"team"`.

## 7.4. –¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ –ì–∞–π–¥ –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤

–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —è–∫ –¥–≤–æ—Ä—ñ–≤–Ω–µ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –±–µ–∑–ø–µ–∫–∏ (security) —Ç–∞ –≥–Ω—É—á–∫–æ—Å—Ç—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ–≥–æ –¥–æ—Å–≤—ñ–¥—É (UX).

### 7.4.1. –î–≤–æ—Ä—ñ–≤–Ω–µ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É

1.  **–†—ñ–≤–µ–Ω—å –¥–∞–Ω–∏—Ö (Data Layer): Supabase Row-Level Security (RLS)**
    *   **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∏–π —Ä—ñ–≤–µ–Ω—å –±–µ–∑–ø–µ–∫–∏, —â–æ –ø—Ä–∞—Ü—é—î –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤ PostgreSQL. RLS —î –æ—Å–Ω–æ–≤–Ω–∏–º –º–µ—Ö–∞–Ω—ñ–∑–º–æ–º –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó multi-tenancy (—ñ–∑–æ–ª—è—Ü—ñ—ó –¥–∞–Ω–∏—Ö –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è–º–∏) —Ç–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö –ø–æ–ª—ñ—Ç–∏–∫ –¥–æ—Å—Ç—É–ø—É.
    *   **–ú–µ—Ö–∞–Ω—ñ–∑–º:** –ü–æ–ª—ñ—Ç–∏–∫–∏ RLS –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –¥–ª—è –∫–æ–∂–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó `SELECT`, `INSERT`, `UPDATE`, `DELETE`. –í–æ–Ω–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –¥–∞–Ω—ñ –∑ JWT-—Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `workspace_id`, `role`) –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ä—è–¥–∫—ñ–≤, –¥–æ —è–∫–∏—Ö –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø. –¶–µ–π —Ä—ñ–≤–µ–Ω—å –∑–∞—Ö–∏—Å—Ç—É –Ω–µ–º–æ–∂–ª–∏–≤–æ –æ–±—ñ–π—Ç–∏ –∑ –±–æ–∫—É –∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

2.  **–†—ñ–≤–µ–Ω—å –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É (Application Layer): Next.js**
    *   **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≥—Ä–∞–Ω—É–ª—è—Ä–Ω–∏—Ö –±—ñ–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ–∑–≤–æ–ª—ñ–≤ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –¥—ñ—ó —Ç–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ UI.
    *   **–ú–µ—Ö–∞–Ω—ñ–∑–º:**
        *   **UI Layer (Client-Side):** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ React —É–º–æ–≤–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–æ–ª—ñ —Ç–∞ –¥–æ–∑–≤–æ–ª—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î —á–∏—Å—Ç–∏–π UX, –¥–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –±–∞—á–∞—Ç—å –ª–∏—à–µ —Ç—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è, –∑ —è–∫–∏–º–∏ –º–æ–∂—É—Ç—å –≤–∑–∞—î–º–æ–¥—ñ—è—Ç–∏. –¶–µ–π —Ä—ñ–≤–µ–Ω—å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –≤—ñ–∑—É–∞–ª—å–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è, –∞–ª–µ –Ω–µ —î –æ—Å–Ω–æ–≤–Ω–∏–º –º–µ—Ö–∞–Ω—ñ–∑–º–æ–º –±–µ–∑–ø–µ–∫–∏.
        *   **Logic Layer (Server-Side):** –£ Server Actions —Ç–∞ API Routes –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–æ–∑–≤–æ–ª—ñ–≤ –ø–µ—Ä–µ–¥ –±—É–¥—å-—è–∫–æ—é –º—É—Ç–∞—Ü—ñ—î—é –¥–∞–Ω–∏—Ö. –¶–µ–π —Ä—ñ–≤–µ–Ω—å —î –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–∏–º –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–º –æ–ø–µ—Ä–∞—Ü—ñ—è–º, —è–∫—ñ –Ω–µ –ø–æ–∫—Ä–∏–≤–∞—é—Ç—å—Å—è –∑–∞–≥–∞–ª—å–Ω–∏–º–∏ –ø–æ–ª—ñ—Ç–∏–∫–∞–º–∏ RLS (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "—Ç—ñ–ª—å–∫–∏ `manager` –º–æ–∂–µ –≤–∏–¥–∞–ª—è—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∏").

### 7.4.2. –ö–ª—é—á–æ–≤—ñ —Ñ–∞–π–ª–∏ —Å–∏—Å—Ç–µ–º–∏

*   `src/shared/lib/auth/permissions.ts`
    *   **–†–æ–ª—å:** –°—Ç–∞—Ç–∏—á–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ "–¥–∂–µ—Ä–µ–ª–æ –ø—Ä–∞–≤–¥–∏" (source of truth) –¥–ª—è –≤—Å—ñ—î—ó RBAC-–º–æ–¥–µ–ª—ñ. –ú—ñ—Å—Ç–∏—Ç—å `enum` –≤—Å—ñ—Ö –º–æ–∂–ª–∏–≤–∏—Ö –¥–æ–∑–≤–æ–ª—ñ–≤ (`Permission`) —Ç–∞ –º–∞–ø—ñ–Ω–≥ `ROLE_PERMISSIONS`, —â–æ –ø–æ–≤'—è–∑—É—î —Ä–æ–ª—ñ –∑ –º–∞—Å–∏–≤–∞–º–∏ –¥–æ–∑–≤–æ–ª—ñ–≤.

*   `src/shared/lib/context/auth-context.tsx`
    *   **–†–æ–ª—å:** React Context –ø—Ä–æ–≤–∞–π–¥–µ—Ä, —â–æ –≥—ñ–¥—Ä–∞—Ç—É—î –∫–ª—ñ—î–Ω—Ç-—Å–∞–π–¥ –¥–∞–Ω–∏–º–∏ —Å–µ—Å—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –≤–∫–ª—é—á–∞—é—á–∏ –π–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—å, —Ä–æ–ª—å —É –ø–æ—Ç–æ—á–Ω–æ–º—É workspace —Ç–∞ —Å—Ç–∞—Ç—É—Å –ø—ñ–¥–ø–∏—Å–∫–∏. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è prop-drilling.

*   `src/shared/lib/hooks/use-auth.ts`
    *   **–†–æ–ª—å:** –ù–∞–±—ñ—Ä –∫–∞—Å—Ç–æ–º–Ω–∏—Ö —Ö—É–∫—ñ–≤ (`usePermission`, `useAuth`, `useWorkspace` —Ç–æ—â–æ), —â–æ –Ω–∞–¥–∞—é—Ç—å –∑—Ä—É—á–Ω–∏–π —Ç–∞ —ñ–¥—ñ–æ–º–∞—Ç–∏—á–Ω–∏–π API –¥–ª—è —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ `AuthContext` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤.

*   `src/shared/lib/auth/permission-guard.tsx`
    *   **–†–æ–ª—å:** –ù–∞–±—ñ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤-–≥–∞—Ä–¥—ñ–≤ (`<Can>`, `<RequireRole>`), —è–∫—ñ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≤–∏–¥–∏–º—ñ—Å—Ç—é UI. –í–æ–Ω–∏ —ñ–Ω–∫–∞–ø—Å—É–ª—é—é—Ç—å –ª–æ–≥—ñ–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–æ–∑–≤–æ–ª—ñ–≤, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ö—É–∫–∏ –∑ `use-auth.ts`.

### 7.4.3. –ü–∞—Ç–µ—Ä–Ω–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

#### 1. Client-Side: –£–º–æ–≤–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ UI

–î–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≤–∏–¥–∏–º—ñ—Å—Ç—é –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø—Ä–∞–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. –¶–µ–π –ø—ñ–¥—Ö—ñ–¥ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è UX, –∞ –Ω–µ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏.

**–ü—Ä–∏–∫–ª–∞–¥: –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–Ω–æ–ø–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–æ–∑–≤–æ–ª—É `delete_contact`**

```tsx
import { Can } from "@/shared/lib/auth/permission-guard";
import { Button } from "@/shared/components/ui/button";

function ContactActions({ contactId }) {
  return (
    <div>
      {/* ...—ñ–Ω—à—ñ –∫–Ω–æ–ø–∫–∏... */}
      <Can permission="delete_contact">
        <Button variant="destructive">–í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç</Button>
      </Can>
    </div>
  );
}
```

**–î–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏-–≥–∞—Ä–¥–∏:**
*   `<Can permission="...">`: –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –¥–æ–∑–≤–æ–ª—É.
*   `<CanAll permissions=[...]>`: –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å **–≤—Å—ñ—Ö** –¥–æ–∑–≤–æ–ª—ñ–≤ –∑—ñ —Å–ø–∏—Å–∫—É.
*   `<CanAny permissions=[...]>`: –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å **—Ö–æ—á–∞ –± –æ–¥–Ω–æ–≥–æ** –¥–æ–∑–≤–æ–ª—É –∑—ñ —Å–ø–∏—Å–∫—É.
*   `<RequireRole roles=[...]>`: –ü–µ—Ä–µ–≤—ñ—Ä—è—î –ø—Ä–∏–Ω–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–æ –æ–¥–Ω—ñ—î—ó –∑ —Ä–æ–ª–µ–π.

#### 2. Server-Side: –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤ Server Actions / API Routes

**–ö—Ä–∏—Ç–∏—á–Ω–∏–π —Ä—ñ–≤–µ–Ω—å –±–µ–∑–ø–µ–∫–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.** –ö–æ–∂–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è, —â–æ –∑–º—ñ–Ω—é—î –¥–∞–Ω—ñ, –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ –∑–∞—Ö–∏—â–µ–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –¥–æ–∑–≤–æ–ª—ñ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ.

**–ü—Ä–∏–∫–ª–∞–¥: –ó–∞—Ö–∏—Å—Ç Server Action –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—É**

```ts
"use server";

import { createServerActionClient } from "@supabase/auth-helpers-nextjs";
import { cookies } from "next/headers";
import { hasPermission } from "@/shared/lib/auth/permissions";
import { getUserRole } from "@/shared/lib/auth/get-user-role"; // –£—Ç–∏–ª—ñ—Ç–∞ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–æ–ª—ñ

export async function deleteContact(contactId: string) {
  const supabase = createServerActionClient({ cookies });
  
  // 1. –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–µ—Å—ñ—ó —Ç–∞ —Ä–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) {
    throw new Error("Authentication required.");
  }
  
  const userRole = await getUserRole(user.id);
  if (!userRole) {
    throw new Error("User role could not be determined.");
  }

  // 2. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–æ–∑–≤–æ–ª—É
  const canPerformAction = hasPermission(userRole, "delete_contact");
  if (!canPerformAction) {
    // –í—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ—ó, —è–∫—â–æ –¥–æ–∑–≤—ñ–ª –≤—ñ–¥—Å—É—Ç–Ω—ñ–π
    throw new Error("Operation not permitted.");
  }

  // 3. –í–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ—ó
  const { error } = await supabase
    .from("contacts")
    .delete()
    .eq("id", contactId);

  if (error) {
    // –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
    console.error("Supabase delete error:", error);
    throw new Error("Failed to delete contact.");
  }

  // ... revalidatePath, etc.
}
```
–¶–µ–π –ø–∞—Ç–µ—Ä–Ω –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É, —â–æ —É–Ω–µ–º–æ–∂–ª–∏–≤–ª—é—î –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ –º—É—Ç–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö.
